<?xml version="1.0"?>
<Container version="3">
  <Name>icloudpd</Name>
  <Repository>boredazfcuk/icloudpd</Repository>
  <Registry>https://hub.docker.com/r/boredazfcuk/icloudpd/</Registry>
  <Network>bridge</Network>
  <MyIP/>
  <Shell>sh</Shell>
  <Privileged>false</Privileged>
  <Support>https://hub.docker.com/r/boredazfcuk/icloudpd/</Support>
  <Project>https://github.com/Womabre/-unraid-docker-templates</Project>
  <Overview>An Alpine Linux Docker container for ndbroadbent's iCloud Photos Downloader. I use it for syncing the photo streams of all the iDevices in my house back to my server because it's the only way of backing up multiple devices to a single location. It uses the system keyring to securely store credentials, has HEIC to JPG conversion capability, and can send Telegram, Prowl, Pushover, WebHook, DingTalk, Discord, openhab, IYUU and WeCom notifications.&#xD;
&#xD;
It is recommended to use the keyring to securely store credentials. Please connect to the container and run `/usr/local/bin/sync-icloud.sh --Initialise` command manually to start the process of saving your password to the keyring and Apple sends a confirmation code via text or 2FA code to your device which needs to be entered into the console.&#xD;
&#xD;
Create a `.mounted` file inside `iCloud` folder in the photos directory for the container to start syncing photos. This file MUST be created manually and sync will not start without it.</Overview>
  <Category>Backup: Cloud: Downloaders:</Category>
  <WebUI/>
  <TemplateURL>https://raw.githubusercontent.com/Womabre/unraid-docker-templates/master/icloudpd.xml</TemplateURL>
  <Icon>https://raw.githubusercontent.com/Womabre/-unraid-docker-templates/master/images/photos_icon_large.png</Icon>
  <ExtraParams/>
  <PostArgs/>
  <CPUset/>
  <DateInstalled></DateInstalled>
  <DonateText/>
  <DonateLink/>
  <Requires/>
  <Config Name="Apple ID" Target="apple_id" Default="your@appleid.com" Mode="" Description="This is the Apple ID for the account you want to download files from" Type="Variable" Display="always" Required="true" Mask="false"></Config>
  <Config Name="AppData Config Path" Target="/config" Default="/mnt/user/appdata/icloudpd" Mode="rw" Description="" Type="Path" Display="always" Required="true" Mask="false"></Config>
  <Config Name="Synchronisation Interval (seconds)" Target="synchronisation_interval" Default="86400" Mode="" Description="Default is once every 24h." Type="Variable" Display="always" Required="true" Mask="false">259200</Config>
  <Config Name="Data" Target="/home/user/iCloud" Default="/mnt/user/iCloud" Mode="rw,slave" Description="" Type="Path" Display="always" Required="true" Mask="false"></Config>
  <Config Name="Time Zone" Target="TZ" Default="Europe/London" Mode="" Description="" Type="Variable" Display="always" Required="false" Mask="false"></Config>
  <Config Name="Notification Type" Target="notification_type" Default="" Mode="" Description="This specifies the method that is used to send notifications. Currently, there are three options available 'Prowl', 'Pushbullet' and 'Telegram'. When the two factor authentication cookie is within 7 days (default) of expiry, a notification will be sent upon synchronization. No more than a single notification will be sent within a 24 hour period unless the container is restarted. This does not include the notification that is sent each time the container is started" Type="Variable" Display="advanced" Required="false" Mask="false" />
  <Config Name="Notification Title" Target="notification_title" Default="boredazfcuk/iCloudPD" Mode="" Description="This allows you to change the title which is sent on the notifications. This variable will default to boredazfcuk/iCloudPD." Type="Variable" Display="advanced" Required="false" Mask="false">boredazfcuk/iCloudPD</Config>
  <Config Name="Notification Days" Target="notification_days" Default="7" Mode="" Description="When your cookie is nearing expiration, this is the number of days in advance it should notify you. This will default to 7 days if not specified. You will receive a single notification, per day, in the days running up to cookie expiration." Type="Variable" Display="advanced" Required="false" Mask="false">7</Config>
  <Config Name="Download Notifications" Target="download_notifications" Default="" Mode="" Description="Specifies whether notifications with a short summary should be sent for file downloads. This variable will default to True." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Delete Notifications" Target="delete_notifications" Default="" Mode="" Description="Specifies whether notifications with a short summary should be sent for file deletions. This variable will default to True." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Prowl API Key" Target="prowl_api_key" Default="" Mode="" Description="If the notification_type is set to 'Prowl' this is mandatory. This is the API key for your account as generated by the Prowl website" Type="Variable" Display="advanced" Required="false" Mask="false" />
  <Config Name="Pushover User" Target="pushover_user" Default="" Mode="" Description="Mandatory if notification_type set to 'Pushover'. This is the Pushover user key associated with your account." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Pushover Token" Target="pushover_token" Default="" Mode="" Description="Mandatory if notification_type set to 'Pushover'. This is the application API token. You will need to create an application by logging into your Pushover account and creating an application." Type="Variable" Display="advanced" Required="false" Mask="true"/>
  <Config Name="Pushover Sound" Target="pushover_sound" Default="pushover" Mode="" Description="Mandatory if notification_type set to 'Pushover' this variable can be set to customise the sound of the notification. Values for this variable can be found here: https://pushover.net/api#sounds" Type="Variable" Display="advanced" Required="false" Mask="false">pushover</Config>
  <Config Name="Telegram Token" Target="telegram_token" Default="" Mode="" Description="If the notification_type is set to 'Telegram' this is mandatory. This is the token that was assigned to your account by The Botfather" Type="Variable" Display="advanced" Required="false" Mask="false" />
  <Config Name="Telegram Chat ID" Target="telegram_chat_id" Default="" Mode="" Description="If the notification_type is set to 'Telegram' then this is the chat_id for your Telegram bot" Type="Variable" Display="advanced" Required="false" Mask="false" />
  <Config Name="Webhook Server" Target="webhook_server" Default="" Mode="" Description="Mandatory if notification_type set to 'Webhook' or 'openhab' then this is the name of the server to connect to when sending webhook notifications." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Webhook Port" Target="webhook_port" Default="" Mode="" Description="Mandatory if notification_type set to 'Webhook' or 'openhab' then this is the port number to use when connecting to the webhook server. If this is not set, it will default to 8123." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Webhook Path" Target="webhook_path" Default="" Mode="" Description="Mandatory if notification_type set to 'Webhook' or 'openhab' then this is the path to use when connectiong to the webhook server. The path must start and end with a forward slash character. If this is not set, it will default to /api/webhook/. Openhab uses " Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Webhook ID" Target="webhook_id" Default="" Mode="" Description="Mandatory if notification_type set to 'Webhook' or 'openhab' then this is the Webhook ID to use. Openhab uses " Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Webhook HTTPS" Target="webhook_https" Default="" Mode="" Description="If this is set to 'True' then the Webhook or openhab notification URL will use HTTPS, otherwise it will default to HTTP." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Webhook Body" Target="webhook_body" Default="" Mode="" Description="Adapt to different services. Homeassistant uses " Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Dingtalk Token" Target="dingtalk_token" Default="" Mode="" Description="Mandatory if notification_type set to 'Dingtalk' then this is the access token generated by the Dingtalk application. In the Dingtalk application, go to 'Security Settings', select 'Custom Keywords' and set to to the same value as notification_title." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Discord ID" Target="discord_id" Default="" Mode="" Description="This is the first half of the URL generated by Discord's webhook integration. It will be all numbers. Do not include any /" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Discord Token" Target="discord_token" Default="" Mode="" Description="This is the second half of the URL generated by Discords webhook integration. Do no include any /" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="IYUU Token" Target="iyuu_token" Default="" Mode="" Description="Mandatory if notification_type set to 'IYUU'. This is the access token required to send messages." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="WeCom ID" Target="wecom_id" Default="" Mode="" Description="Mandatory if notification_type set to 'WeCom'.&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x4F01;&#x4E1A;ID / This is the CORPID associated with your account&#x3002;&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#x914D;&#x7F6E;&#x4E5F;&#x53EF;&#x53C2;&#x89C1;&#x6B64;&#x9879;&#x76EE;&#x94FE;&#x63A5;" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="WeCom Secret" Target="wecom_secret" Default="" Mode="" Description="Mandatory if notification_type set to 'WeCom'.&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x4F01;&#x4E1A;&#x5E94;&#x7528;&#x7684;Secret / This is the CORPSECRET associated with your account" Type="Variable" Display="advanced" Required="false" Mask="true"/>
  <Config Name="WeCom Agent ID" Target="agentid" Default="" Mode="" Description="Mandatory if notification_type set to 'WeCom'.&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x4F01;&#x4E1A;&#x5E94;&#x7528;&#x7684;id / Enterprise application id" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="WeCom Touser" Target="touser" Default="" Mode="" Description="Mandatory if notification_type set to 'WeCom'.&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x63A5;&#x6536;&#x901A;&#x77E5;&#x7684;&#x5BF9;&#x8C61; / who receives notifications" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="WeCom Content Source URL" Target="content_source_url" Default="" Mode="" Description="Mandatory if notification_type set to 'WeCom'.&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x9605;&#x8BFB;&#x539F;&#x6587;&#x8DF3;&#x8F6C;&#x94FE;&#x63A5; / Click on the page link after " Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="WeCom Name" Target="name" Default="" Mode="" Description="Mandatory if notification_type set to 'WeCom'.&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x5F53;&#x524D; Apple ID &#x6240;&#x6709;&#x4EBA; / Current Apple ID owner" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="WeCom Proxy" Target="wecom_proxy" Default="" Mode="" Description="Optional. &#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x7684;&#x4EE3;&#x7406;,&#x975E;&#x5FC5;&#x586B;,&#x7528;&#x6765;&#x7ED5;&#x8FC7;&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x7684;IP&#x767D;&#x540D;&#x5355; / Optional,Used to bypass the ip whitelist of WeCom" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="WeCom Media ID Startup" Target="media_id_startup" Default="" Mode="" Description="Mandatory if notification_type set to 'WeCom'.&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x542F;&#x52A8;&#x6210;&#x529F;&#x901A;&#x77E5;&#x5C01;&#x9762; / Image for Startup success" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="WeCom Media ID Download" Target="media_id_download" Default="" Mode="" Description="Mandatory if notification_type set to 'WeCom'.&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x4E0B;&#x8F7D;&#x901A;&#x77E5;&#x5C01;&#x9762; / Image for downloaded files" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="WeCom Media ID Delete" Target="media_id_delete" Default="" Mode="" Description="Mandatory if notification_type set to 'WeCom'.&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x5220;&#x9664;&#x6587;&#x4EF6;&#x901A;&#x77E5;&#x5C01;&#x9762; / Image for deleted files" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="WeCom Media ID Expiration" Target="media_id_expiration" Default="" Mode="" Description="Mandatory if notification_type set to 'WeCom'.&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;cookie&#x5373;&#x5C06;&#x8FC7;&#x671F;&#x901A;&#x77E5;&#x5C01;&#x9762; / Image for cookie expiration" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="WeCom Media ID Warning" Target="media_id_warning" Default="" Mode="" Description="Mandatory if notification_type set to 'WeCom'.&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x901A;&#x77E5;&#xFF0C;&#x540C;&#x6B65;&#x5931;&#x8D25;&#x3001;cookiey&#x5DF2;&#x8FC7;&#x671F;&#x901A;&#x77E5;&#x5C01;&#x9762; / Image for cookie expired or failure" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Gotify App Token" Target="gotify_app_token" Default="" Mode="" Description="Mandatory if notification_type set to 'Gotify'. This is the app_token associated with your account." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Gotify Server URL" Target="gotify_server_url" Default="" Mode="" Description="Mandatory if notification_type set to 'Gotify'. This is the server name of your Gotify server e.g. server.domain.tld" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Bark Device Key" Target="bark_device_key" Default="" Mode="" Description="Mandatory if notification_type set to 'Bark'. This is the device key associated with your device" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Bark Server" Target="bark_server" Default="" Mode="" Description="Mandatory if notification_type set to 'Bark'. This is the name of your Bark server, including the port, if required. e.g. server.domain.com or server.domain.com:8080" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Folder Structure" Target="folder_structure" Default="" Mode="" Description="This specifies the folder structure to use in your download destination directory. If this variable is not set, it will set {:%Y/%m/%d} as the default. Use none to download to a flat file structure. Use album to store in folders with same name as on iCloud.com" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Skip Check" Target="skip_check" Default="" Mode="" Description="Set this to True skip the check for new files. The check can have issues with large libraries, please set to True if you have more than a few thousand photos. This variable will default to False." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Delete Accompanying" Target="delete_accompanying" Default="" Mode="" Description="Tells the script to delete files which accompany the HEIC files that are downloaded. These are the JPG files which are created if you have HEIC to JPG conversion enabled. They are also the _HEVC.MOV files which make up part of a live photo. This feature deletes files from your disk. I'm not responsible for any data loss." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Delete Empty Directories" Target="delete_empty_directories" Default="" Mode="" Description="Tells the script to delete any empty directories it finds in the download path. It will only run if folder_structure isn't set to 'none'" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Set Exif DateTime" Target="set_exif_datetime" Default="" Mode="" Description="Write the DateTimeOriginal exif tag from file creation date. This variable will default to False." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Auto Delete" Target="auto_delete" Default="" Mode="" Description="Scans the " Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Photo Size" Target="photo_size" Default="" Mode="" Description="Image size to download. Can be set to original, medium or thumb. This variable will default to original." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Skip Live Photos" Target="skip_live_photos" Default="" Mode="" Description="If this is set, it will skip downloading live photos. This variable will default to False." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Live Photo Size" Target="live_photo_size" Default="" Mode="" Description="Live photo file size to download. Can be set to original, medium or thumb. If skip_live_photos is set, this setting is redundant. This variable will default to original." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Skip Videos" Target="skip_videos" Default="" Mode="" Description="If this is set, it will skip downloading videos. This variable will default to False." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Recent Only" Target="recent_only" Default="" Mode="" Description="Set this to an integer number to only download this many recently added photos. This variable will default to downloading all photos." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Until Found" Target="until_found" Default="" Mode="" Description="Set this to an integer number to only download the most recently added photos, until n number of previously downloaded consecutive photos are found. This variable will default to downloading all photos." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Photo Album" Target="photo_album" Default="" Mode="" Description="Set this to the name of an album to only download photos from a single album." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Photo Library" Target="photo_library" Default="" Mode="" Description="Set this to the name of an iOS 16 shared library to only download photos from a single shared library." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Convert HEIC To JPEG" Target="convert_heic_to_jpeg" Default="" Mode="" Description="Set this to True to convert downloaded HEIC files to JPEG, while also retaining the original." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="JPEG Path" Target="jpeg_path" Default="" Mode="" Description="Set this variable to specify a different location for the converted JPEGs. This variable will default to " Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="JPEG Quality" Target="jpeg_quality" Default="" Mode="" Description="If HEIC to JPEG conversion is enabled, this variable will let you set the quality of the converted file by specifying a number from 0 (lowest quality) to 100 (highest quality) If convert_heic_to_jpeg is set, and this variable isn't, it will default to 90." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="iCloud China" Target="icloud_china" Default="" Mode="" Description="Set this to True to use icloud.com.cm instead of icloud.com as the download source." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Single Pass" Target="single_pass" Default="" Mode="" Description="Set this to True to exit out after a single pass instead of looping as per the synchronisation_interval. If this option is used, it will automatically disable the download check. If using this variable, the restart policy of the container must be set to " Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Trigger Nextlcoud CLI Synchronisation" Target="trigger_nextlcoudcli_synchronisation" Default="" Mode="" Description="This creates a file in the download directory after a new files are downloaded. My NextcloudCLI container will detect this and force an immediate sync to the Nextcloud server." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Authentication Type" Target="authentication_type" Default="2FA" Mode="" Description="This is the type of authentication that is enabled on your iCloud account. Valid values are '2FA' if you have two factor authentication enabled or 'Web' if you do not. If 'Web' is specified, then cookie generation is not required. This variable will default to '2FA'." Type="Variable" Display="advanced-hide" Required="false" Mask="false">2FA</Config>
  <Config Name="Synchronisation Delay" Target="synchronisation_delay" Default="" Mode="" Description="This is the number of minutes to delay the first synchronisation. This is so that you can stagger the synchronisations of multiple containers. If this value is not set. It will default to 0. It has a maximum setting of 60." Type="Variable" Display="advanced-hide" Required="false" Mask="false"/>
  <Config Name="Command Line Options" Target="command_line_options" Default="" Mode="" Description="This is for additional command line options you want to pass to the icloudpd application. The list of options for icloudpd can be found here: https://github.com/icloud-photos-downloader/icloud_photos_downloader#usage" Type="Variable" Display="advanced-hide" Required="false" Mask="false"/>
  <Config Name="Root" Target="/root" Default="/mnt/user/appdata/icloudpd/root" Mode="rw" Description="" Type="Path" Display="advanced-hide" Required="true" Mask="false">/mnt/user/appdata/icloudpd/root</Config>
  <Config Name="Directory Permissions" Target="directory_permissions" Default="777" Mode="" Description="" Type="Variable" Display="advanced-hide" Required="false" Mask="false">777</Config>
  <Config Name="File Permissions" Target="file_permissions" Default="666" Mode="" Description="" Type="Variable" Display="advanced-hide" Required="false" Mask="false">666</Config>
  <Config Name="UMASK" Target="UMASK" Default="000" Mode="" Description="" Type="Variable" Display="advanced-hide" Required="true" Mask="false">000</Config>
  <Config Name="PGID" Target="PGID" Default="" Mode="" Description="" Type="Variable" Display="advanced-hide" Required="false" Mask="false">100</Config>
  <Config Name="PUID" Target="PUID" Default="" Mode="" Description="" Type="Variable" Display="advanced-hide" Required="false" Mask="false">99</Config>
</Container>
